{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Admin Dashboard - Account</title>
{% endblock meta %}

{% block content %}
{% include 'navbar-admin.html' %} 
<div class="hidden">{% csrf_token %}</div>
{% include 'delete_modal.html' %}

<style>
.user-element {
    background: #333;
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.75rem;
}
.user-element:hover {
    background: #444;
}
.btn-edit, .btn-delete {
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.btn-edit:hover, .btn-delete:hover {
  transform: scale(1.30);
}
</style>

<div class="min-h-screen bg-[#1E1E1E] pt-[100px] pb-10">
    <div class="w-full max-w-[800px] mx-auto px-4">
        
        <h1 class="text-3xl font-bold text-white mb-6">User Management</h1>
        
        {% if messages %}
        <div id="message-container" class="mb-6 space-y-3">
          {% for message in messages %}
            {% if message.tags == 'success' %}
              <div class="px-4 py-3 text-sm text-green-200">
                {{ message }}
              </div>
            {% elif message.tags == 'error' %}
              <div class="px-4 py-3 text-sm text-red-200">
                {{ message }}
              </div>
            {% endif %}
          {% endfor %}
        </div>
        {% endif %}
      
        <div class="flex flex-col">
            {% for user in users %}
            <div class="user-element" id="user-row-{{ user.id }}">
                <div class="flex gap-4 items-center">
                    {% if user.profile.profile_picture %}
                        <img src="{{ user.profile.profile_picture.url }}" alt="Profile Picture"
                            class="w-[50px] h-[50px] rounded-full border-2 border-green-600 object-cover">
                    {% else %}
                        <img src="{% static 'image/no-profile-picture.svg' %}" alt="No Profile Picture"
                            class="w-[50px] h-[50px] rounded-full border-2 border-green-600 object-cover">
                    {% endif %}
                    <span class="font-medium text-lg">{{ user.username }} {% if user.is_staff %}(Admin){% endif %}</span>
                </div>
                <div class="flex items-center gap-4">
                    <a href="{% url 'account:admin_edit_profile' user.id %}" class="btn-edit">
                        <img src="{% static 'image/edit-outline.svg' %}"> </img>
                    </a>
                    
                    <button type="button" 
                            onclick="showDeleteModal({user_id: {{ user.id }} })" 
                            class="btn-delete">
                        <img src="{% static 'image/delete-outline.svg' %}"> </img>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
setTimeout(() => {
    document.getElementById('message-container').classList.add('hidden');
}, 4000)

</script>


{% endblock %}